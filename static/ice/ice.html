<form class="form-horizontal" role="form" name="form">
<div class="modal-body" id="modal-body">
	<div data-ng-show="ctrl.message()" class="alert"
		data-ng-class="{'alert-info': ctrl.status() == 'CONNECTING', 'alert-danger': ctrl.status() == 'ERROR', 'alert-success': ctrl.status() == 'CONNECTED'}">{{ctrl.message()}}</div>
	<div class="panel panel-default">
		<div class="panel-heading">
	  		ICE login
		</div>
  		<div class="panel-body">
			<div class="form-group">
				<label class="col-xs-4 col-form-label">URL:</label>
				<div class="col-sm-8">
					<input type="text" class="form-control"
					data-ng-model="ctrl.ice().url"
					data-ng-disabled="ctrl.status() == 'CONNECTING'"
					data-ng-blur="ctrl.status() != 'CONNECTING' && !form.$invalid && ctrl.connect()"
					placeholder="ICE URL"
					required>
				</div>
			</div>
			<div class="form-group">
				<label class="col-xs-4 col-form-label">Username:</label>
				<div class="col-sm-8">
					<input type="text" class="form-control"
					data-ng-model="ctrl.ice().username"
					data-ng-disabled="ctrl.status() == 'CONNECTING'"
					data-ng-blur="ctrl.status() != 'CONNECTING' && !form.$invalid && ctrl.connect()"
					placeholder="ICE username"
					required>
				</div>
			</div>
			<div class="form-group">
				<label class="col-xs-4 col-form-label">Password:</label>
				<div class="col-sm-8">
					<input type="password" class="form-control"
					data-ng-model="ctrl.ice().password"
					data-ng-disabled="ctrl.status() == 'CONNECTING'"
					data-ng-blur="ctrl.status() != 'CONNECTING' && !form.$invalid && ctrl.connect()"
					placeholder="ICE password"
					required>
				</div>
			</div>
		</div>
	</div>

	<div class="panel panel-default">
		<div class="panel-heading">
	  		Advanced
		</div>
  		<div class="panel-body">
  			<div class="form-group">
				<label class="col-xs-4 col-form-label">Group:</label>
				<div class="col-sm-8">
					<input type="text" class="form-control"
					data-ng-model="ctrl.ice().groups"
					data-ng-disabled="ctrl.status() != 'CONNECTED'"
					placeholder="ICE group" autocomplete="off"
					uib-typeahead="group for group in ctrl.searchGroups($viewValue)"
					typeahead-min-length="3" typeahead-editable="false">
				</div>
			</div>
			<div class="form-group">
				<label class="col-xs-4 col-form-label">Vector backbone:</label>
				<div class="col-sm-8">
					<input type="text" class="form-control"
					data-ng-model="ctrl.ice().plasmid"
					data-ng-disabled="ctrl.status() != 'CONNECTED'"
					placeholder="Assign Part to Vector backbone" autocomplete="off"
					uib-typeahead="backbone for backbone in ctrl.searchIce('PART', $viewValue)"
					typeahead-min-length="5" typeahead-editable="false">
				</div>
			</div>
			<div class="form-group">
				<label class="col-xs-4 col-form-label">Strain:</label>
				<div class="col-sm-8">
					<input type="text" class="form-control"
					data-ng-model="ctrl.ice().strain"
					data-ng-disabled="ctrl.status() != 'CONNECTED'"
					placeholder="Assign Plasmid to Strain" autocomplete="off"
					uib-typeahead="strain for strain in ctrl.searchIce('STRAIN', $viewValue)"
					typeahead-min-length="5" typeahead-editable="false">
				</div>
			</div>
  		</div>
  	</div>
</div>
<div class="modal-footer">
	<button class="btn btn-primary" type="submit" data-ng-click="ctrl.connect()" data-ng-show="ctrl.status() != 'CONNECTED'" data-ng-disabled="ctrl.status() == 'CONNECTING' || form.$invalid">Login</button>
	<button class="btn btn-danger" type="button" data-ng-click="ctrl.disconnect()" data-ng-show="ctrl.status() == 'CONNECTED'">Logout</button>
    <button class="btn btn-default" type="button" data-ng-click="ctrl.close()" data-ng-disabled="ctrl.status() == 'CONNECTING'">Close</button>
</div>
</form>